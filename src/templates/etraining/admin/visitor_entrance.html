{% extends "etraining/admin/base_etraining.html" %}
{% load i18n %}

{% block breadcrumbs %}
{% endblock %}

{% block sidebar %}
{% endblock %}

{% block content %}
<div class="content wider clearfix">
<div class="content_title">{% trans "Visitor Registration" %}</div>
<form id="reg_form" action="" method="post">{% csrf_token %}
<table class="formtable wider">
<tr>
<td class="formlabel"><label for="id_identity">{% trans "Identity Card: " %}</label></td>
<td colspan="3"><input type="text" id="id_identity" name="identity" style="width:60%" /></td>
</tr>
<tr>
<td class="formlabel"><label for="id_name">{% trans "Name: " %}</label></td>
<td>{{ form.name }}</td>
<td class="formlabel"><label for="id_sex">{% trans "Sex: " %}</label></td>
<td>
<select name="sex" id="id_sex">
<option value=1>男</option>
<option value=0>女</option>
</td>
</tr>
<tr>
<td class="formlabel"><label for="id_edu">{% trans "Edu: " %}</label></td>
<td>
<select name="edu" id="id_edu">
<option value="小学">小学</option>
<option value="初中">初中</option>
<option value="高中">高中</option>
<option value="大学" selected>大学</option>
<option value="研究生">研究生</option>
<option value="其他">其他</option>
</select>
</td>
<td class="formlabel"><label for="id_major">{% trans "Major: " %}</label></td>
<td>
<select name="major" id="id_major">
<option value="计算机">计算机</option>
<option value="数学">数学</option>
<option value="物理">物理</option>
<option value="无线电" selected>无线电</option>
<option value="其他">其他</option>
</select>
</td>
</tr>
<tr>
<td class="formlabel"><label for="id_duty">{% trans "Duty: " %}</label></td>
<td>{{ form.duty }}</td>
<td class="formlabel"><label for="id_org">{% trans "Org: " %}</label></td>
<td>{{ form.org }}</td>
</tr>
<tr>
<td class="formlabel"><label for="id_home_address">{% trans "Homeaddress: " %}</label></td>
<td>{{ form.home_address }}</td>
<td class="formlabel"><label for="id_phone_number">{% trans "Phone number: " %}</label></td>
<td>{{ form.phone_number }}</td>
</tr>
<tr>
<td class="formlabel"><label for="id_group">{% trans "Group: " %}</label></td>
<td>
<select id="parent" name="group">
{% for group in groups %}
<option value="{{group.id}}">{{group.name}}</option>
{% endfor %}
</select>
<select id="child" name="sub_group">
{% for group in sub_groups %}
<option class="sub_{{group.parent_group.id}}" value="{{group.id}}">{{group.name}}</option>
{% endfor %}
</select>
</td>
<td class="formlabel"><label for="id_certid">{% trans "Cert ID: " %}</label></td>
<td><input type="text" value="" name="certid" id="id_certid" disabled />
</tr>
<tr>
<td class="formlabel"><label for="id_reason">{% trans "Reason: " %}</label></td>
<td colspan="3"><textarea id="id_reason" name="reason" style="width:70%"></textarea> </td>
</tr>
<tr class="submit_row">
<td colspan="4" class="center"> <input type="submit" value="提交" /></td>
</tr>
</table>
</form>
</div>
{% endblock %}

{% block extrascript %}
{{block.super}}
<script>
$(document).ready(function() {
  makeSublist('parent', 'child', false, '');
  $("#child").change( function() {
    if ($(this).attr("value") == 23) {
      if ($("#id_certid").attr("disabled")) {
        $("#id_certid").removeAttr("disabled");
      }
    } else {
      $("#id_certid").attr("disabled", "disabled");
    }
  });
  $("#reg_form").submit( function() {
    if ($("#child").attr("value") == 23) {
      if (!$("#id_certid").attr("value")) {
        alert("请输入特殊工种证件号码")
        return false;
      }
    }
  });
});
</script>
{% endblock %}
